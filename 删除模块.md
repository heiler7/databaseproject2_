# 删除模块

## 功能分类

- 删除库
- 删除表
- 删除表项

## 删除数据库

### 基本思路

- 解析sql语句，如果符合删除数据库的正则表达式，那么从语句中得到要删除的数据库的名称
- 从数据库表文件中查看是否有这个名称对应的并且其删除标记为FALSE的元组

  - 如果没有，要删除的数据库不存在
  - 如果存在，将该元组的删除标记改为TRUE
- 查找存放所有表数据的表，选择所有属于该数据库且删除标记为FALSE的元组（也就是属于该数据库的表）
  - 如果有元组被选择，将上述元组的删除标记改为TRUE，表示已经删除
  - 如果没有元组被选择，提示要删除的表不存在


## 删除表

### 基本思路

- 解析sql语句，如果符合删除数据库的正则表达式，那么从语句中得到要删除的表的名称
- 从全局变量获得现在选择的数据库名称
  - 如果数据库表文件中有这个名称对应的并且其删除标记为FALSE的元组，继续
  - 否则，提示选择数据库
- 查找存放所有表数据的表，选择所有属于该数据库且表名为需要删除的表名，删除标记为FALSE的元组
  - 如果有元组被选择，将上述元组的删除标记改为TRUE，表示已经删除
  - 如果没有元组被选择，提示要删除的表不存在

## 删除表项

### 基本思路

- 解析sql语句，如果符合删除数据库的正则表达式，那么从语句中得到要删除的表项所在的表的名称以及筛选条件
- 从全局变量获得现在选择的数据库名称
  - 如果数据库表文件中有这个名称对应的并且其删除标记为FALSE的元组，继续
  - 否则，提示选择数据库
- 查找存放所有表数据的表，选择所有属于该数据库且表名为需要删除的表名，删除标记为FALSE的元组
  - 如果有元组被选择，说明要删除的表项所在的表存在，继续
  - 如果没有元组被选择，提示要删除的表项所在的表不存在
- 读取要删除的表项所在的表，然后删除所有满足筛选条件的行